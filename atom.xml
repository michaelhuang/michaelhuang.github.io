<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>learn to love less</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://michaelhuang.github.io/"/>
  <updated>2016-04-15T15:16:20.000Z</updated>
  <id>http://michaelhuang.github.io/</id>
  
  <author>
    <name>huangzhf</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hive实现拉链存储</title>
    <link href="http://michaelhuang.github.io/2015/hive%E5%AE%9E%E7%8E%B0%E6%8B%89%E9%93%BE%E5%AD%98%E5%82%A8/"/>
    <id>http://michaelhuang.github.io/2015/hive实现拉链存储/</id>
    <published>2015-04-01T13:30:20.000Z</published>
    <updated>2016-04-15T15:16:20.000Z</updated>
    
    <content type="html">&lt;p&gt;什么是拉链存储？数据仓库经常用到，通过给record增加两个字段: 生效日期、失效日期，来记录数据的生命周期变化；好处是既节省存储空间，又保证历史数据变化的完整性，最重要的还能快速访问不同时段的数据快照&lt;/p&gt;
&lt;p&gt;那为什么叫拉链呢？因为每回新更新record进来后，都会对旧record进行闭链（更改失效日期），同时对新record开链（更改生效日期），就像链条一样，一环扣一环&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;下面以用户数据为例：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/hive-lalian01.png&quot; alt=&quot;用户基本信息&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/hive-lalian02.png&quot; alt=&quot;数据一生&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/hive-lalian03.png&quot; alt=&quot;加入拉链日期&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/hive-lalian04.png&quot; alt=&quot;取某天快照&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/hive-lalian05.png&quot; alt=&quot;取一段时间快照&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Hive-ODPS实现方法&quot;&gt;&lt;a href=&quot;#Hive-ODPS实现方法&quot; class=&quot;headerlink&quot; title=&quot;Hive/ODPS实现方法&quot;&gt;&lt;/a&gt;Hive/ODPS实现方法&lt;/h2&gt;&lt;p&gt;Hive两个特性：&lt;code&gt;only write once&lt;/code&gt;, &lt;code&gt;schema on read&lt;/code&gt;&lt;br&gt;一般来说存储底层是HDFS（当然有可能是spark或其他，本文不考虑），所以是做不了update的，update成本都不如覆盖重写了，可以考虑利用&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LEAD Function&lt;/a&gt;解决&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PRIMARY_KEY,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        EFFECTIVE_DT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;CASE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LEAD&lt;/span&gt;(EFFECTIVE_DT,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;OVER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              (&lt;span class=&quot;keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; PRIMARY_KEY &lt;span class=&quot;keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; EFFECTIVE_DT)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 &lt;span class=&quot;keyword&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;LEAD&lt;/span&gt;(EFFECTIVE_DT,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;OVER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              (&lt;span class=&quot;keyword&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; PRIMARY_KEY &lt;span class=&quot;keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;BY&lt;/span&gt; EFFECTIVE_DT)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;AS&lt;/span&gt; EXPIRED_DT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        EVENT_VALUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           PRIMARY_KEY,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EFFECTIVE_DT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EVENT_VALUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EXISTING_TIME_SERIES_TABLE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;WHERE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EXPIRED_DT &lt;span class=&quot;keyword&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;UNION&lt;/span&gt; ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           PRIMARY_KEY,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EFFECTIVE_DT,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           EVENT_VALUE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; NEW_TIME_SERIES_TABLE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       ) sub_1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;div class=&quot;tip&quot;&gt;&lt;br&gt;该方法不具有幂等性，重复执行会导致多出&lt;code&gt;EFFECTIVE_DT = EXPIRED_DT&lt;/code&gt;的数据；如果无法避免重复执行，子查询里面需要去重&lt;br&gt;&lt;/div&gt;

</content>
    
    <summary type="html">
    
      &lt;p&gt;什么是拉链存储？数据仓库经常用到，通过给record增加两个字段: 生效日期、失效日期，来记录数据的生命周期变化；好处是既节省存储空间，又保证历史数据变化的完整性，最重要的还能快速访问不同时段的数据快照&lt;/p&gt;
&lt;p&gt;那为什么叫拉链呢？因为每回新更新record进来后，都会对旧record进行闭链（更改失效日期），同时对新record开链（更改生效日期），就像链条一样，一环扣一环&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>锤子发布会</title>
    <link href="http://michaelhuang.github.io/2014/20140522_%E8%B6%85%E7%8E%B0%E5%AE%9E%E7%90%86%E6%83%B3%E4%B8%BB%E4%B9%89/"/>
    <id>http://michaelhuang.github.io/2014/20140522_超现实理想主义/</id>
    <published>2014-05-22T12:55:30.000Z</published>
    <updated>2016-03-18T05:42:54.000Z</updated>
    
    <content type="html">&lt;p&gt;今天看了老罗的锤子专场单口相声，虽不是一个划时代的产品，但是不可否认，确实是个很认真，很有诚意，极具工匠精神的产品。除产品本身外，他那种解决问题的方式更让我印象深刻&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;关注细节，善于发现问题，并敢于刨根问题&quot;&gt;&lt;a href=&quot;#关注细节，善于发现问题，并敢于刨根问题&quot; class=&quot;headerlink&quot; title=&quot;关注细节，善于发现问题，并敢于刨根问题&quot;&gt;&lt;/a&gt;关注细节，善于发现问题，并敢于刨根问题&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;4000W像素拍出效果为何比不上800W？&lt;br&gt;同样装备富士通800W的两个手机，为何效果相差如此之大？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;资源整合能力&quot;&gt;&lt;a href=&quot;#资源整合能力&quot; class=&quot;headerlink&quot; title=&quot;资源整合能力&quot;&gt;&lt;/a&gt;资源整合能力&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;一个英语老师，带着一帮“英语老师”，两年时间如何从零到发布锤子？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;人性化，化繁为简&quot;&gt;&lt;a href=&quot;#人性化，化繁为简&quot; class=&quot;headerlink&quot; title=&quot;人性化，化繁为简&quot;&gt;&lt;/a&gt;人性化，化繁为简&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;所有操作都是以人为主，以减少操作次数提高效率为宗旨，手机是被人玩，不是人被手机玩，目前国内大部分手机厂商都是一味拼参数，而完全忽视用户体验，这是舍本求末，利益熏心所致；这也可以看出好的产品经理有多么重要，不能只有逻辑思维编码能力，还要有审美能力，一定的艺术细菌，更重要的是要有对改善人类生活品质的强烈欲望和持久基情&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;不断接受反馈，不断否决自己，寻找完美解决方案&quot;&gt;&lt;a href=&quot;#不断接受反馈，不断否决自己，寻找完美解决方案&quot; class=&quot;headerlink&quot; title=&quot;不断接受反馈，不断否决自己，寻找完美解决方案&quot;&gt;&lt;/a&gt;不断接受反馈，不断否决自己，寻找完美解决方案&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;锤子系统从发布测试版到正式发布，不断的和用户互动，绞尽脑汁，全力优化解决每一个问题，能做到这一点，也不难，难的是能否一被子&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;老罗一直都是高调做事，高调做人，两年前就告知世界：他，一个英语老师，才是乔布斯衣钵的唯一传人，当时的结果可想而知；其实，国内科技创业公司，早期这样高调，很容易死的很惨，锤子通过两年时间，走到今天，实属不易；不过，谁叫他是老罗，做事本来就不按套路，他要是早期夹着尾巴搞锤子，结果未必会有现在好&lt;/p&gt;
&lt;p&gt;最后老罗爆料他家人也被问候，确实感到很震撼，现实世界总是充满悲观主义，也从不缺少喷子，他们不喜欢变化，即使是好的思想，好的创新理念，也会选择逃避，甚至怒而击之&lt;/p&gt;
&lt;p&gt;喷子的使命：[我不行，你也得不行，你要行，我们就有权力集结起来，维护原来的秩序，一起喷死你]&lt;br&gt;毕竟不行的人占大多数，一人一口吐沫星子，也能淹死你&lt;/p&gt;
&lt;p&gt;科技在发展，社会在进步，可是人们的道德底线貌似在一次一次的刷新；为了“五毛钱”，什么事情都可以做出来&lt;/p&gt;
&lt;p&gt;世界如此险恶，你要内心强大&lt;/p&gt;
&lt;p&gt;革命尚未成功，锤子仍需努力，是中国创客的崛起，还是一种文化现象的绝唱？&lt;br&gt;拭目以待~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天看了老罗的锤子专场单口相声，虽不是一个划时代的产品，但是不可否认，确实是个很认真，很有诚意，极具工匠精神的产品。除产品本身外，他那种解决问题的方式更让我印象深刻&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>好玩的Ssh</title>
    <link href="http://michaelhuang.github.io/2014/20140402_ssh_two/"/>
    <id>http://michaelhuang.github.io/2014/20140402_ssh_two/</id>
    <published>2014-04-02T12:04:51.000Z</published>
    <updated>2016-03-18T06:12:48.000Z</updated>
    
    <content type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# git push 总特么timeout咋整&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 这个命令是用来调试用的，用来挖地址挺不错的, 我就挖到一个&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh -vT git@github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ~/.ssh/config&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  User git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HostName 192.30.252.131&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ssh-agent-forwaring&quot;&gt;&lt;a href=&quot;#ssh-agent-forwaring&quot; class=&quot;headerlink&quot; title=&quot;ssh agent forwaring&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.unixwiz.net/techtips/ssh-agent-forwarding.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ssh agent forwaring&lt;/a&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------+     git push        +---------+       git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt;/pull      +---------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|  client | =================&amp;gt;  |  github |    ==================&amp;gt;    |  server |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|         |                     |         |                           |         |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------+                     +---------+                           +---------+&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个特性，deploy server的时候很方便；只需要添加client端的公钥到github即可~&lt;br&gt;&lt;a href=&quot;https://developer.github.com/guides/using-ssh-agent-forwarding/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何配置请温柔地点击我&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;ssh-local-port-forwarding&quot;&gt;&lt;a href=&quot;#ssh-local-port-forwarding&quot; class=&quot;headerlink&quot; title=&quot;ssh local port forwarding&quot;&gt;&lt;/a&gt;ssh local port forwarding&lt;/h2&gt;&lt;p&gt;出于安全考虑，server常规接口一般都会屏蔽掉，只留下80/443(webservers)、22(ssh, 当然sshd_config中可以更换掉), 但是有时候可能需要连接数据库，比如mysql(3306)，但是本地3306接口被屏蔽掉了，如何破？&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 连接本地10588接口即可连接远端mysql数据库_&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#   -f    _后台运行_&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#   -N    _禁止执行ssh remote command_&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#   -L    _本地接口定向_&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; -N -L 10588:127.0.0.1:3306 name@database.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ~/.ssh/config&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host tunnel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HostName database.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  IdentityFile ~/.ssh/database.example.key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  LocalForward 10588 127.0.0.1:3306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  User name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; -N tunnel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Well known ports&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;git-push总提示输入username-passwd&quot;&gt;&lt;a href=&quot;#git-push总提示输入username-passwd&quot; class=&quot;headerlink&quot; title=&quot;git push总提示输入username/passwd&quot;&gt;&lt;/a&gt;git push总提示输入username/passwd&lt;/h2&gt;&lt;p&gt;这是因为clone的时候用的https，改成ssh clone url&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git remote &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-url origin git@github.com:username/repo.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;神器-OSX-Fuse&quot;&gt;&lt;a href=&quot;#神器-OSX-Fuse&quot; class=&quot;headerlink&quot; title=&quot;神器 OSX Fuse&quot;&gt;&lt;/a&gt;神器 &lt;a href=&quot;http://osxfuse.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OSX Fuse&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;scp这命令都知道啊，但是命令敲起来还是有点麻烦，能不能直接像操作本地文件系统一样操作远程文件那？装上他，只需要将远程文件夹挂载到本地指定文件路径即可实现&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;vim-emacs-编辑远程文件&quot;&gt;&lt;a href=&quot;#vim-emacs-编辑远程文件&quot; class=&quot;headerlink&quot; title=&quot;vim / emacs 编辑远程文件&quot;&gt;&lt;/a&gt;vim / emacs 编辑远程文件&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://vim.wikia.com/wiki/Editing_remote_files_via_scp_in_vim&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;for vim&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.gnu.org/software/emacs/manual/html_node/emacs/Remote-Files.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;for emacs&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
</content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# git push 总特么timeout咋整&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 这个命令是用来调试用的，用来挖地址挺不错的, 我就挖到一个&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh -vT git@github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ~/.ssh/config&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host github.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  User git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  HostName 192.30.252.131&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>为何你的Remote Ssh Command会报错(bash)</title>
    <link href="http://michaelhuang.github.io/2014/20140401_ssh_one/"/>
    <id>http://michaelhuang.github.io/2014/20140401_ssh_one/</id>
    <published>2014-04-01T12:07:26.000Z</published>
    <updated>2016-03-18T05:51:11.000Z</updated>
    
    <content type="html">&lt;p&gt;先说下这问题咋来的，目前开发流程如下：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+---------------+       scp files...                     +-----------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| localhost     |  ===================================&amp;gt;  | remote host     |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; coding  |   remote ssh &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; compiling     |   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; compiling |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------+                                        +-----------------+&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如上图，代码是本地马吊们敲出来地，so文件是要放到远程开发环境编译出来地；&lt;br&gt;普通青年尼，可能是打开xshell，xftp，先把文件拖上去，然后ssh登陆编译环境，然后make;&lt;br&gt;效率极低不说，逼格也不够啊，于是乎就有了下面代码：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scp *&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;*.&amp;#123;gcc,h,pc,cpp&amp;#125; ya-dev:~/src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh ya-dev &lt;span class=&quot;string&quot;&gt;&#39;cd ~/src; ls &#39;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;*&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&#39;.gcc  | xargs -I &amp;#123;&amp;#125; make -f &amp;#123;&amp;#125; ORA_VER=10&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;问题来了，远程执行会报错，部分lib库找不到；但是ssh登陆后再执行就没问题~&lt;br&gt;&lt;code&gt;ssh ya-dev env&lt;/code&gt; 一看，果然缺少很多环境变量，为什么会这样呢，这就要从爷爷粮票的故事讲起了~&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Shell-modes&quot;&gt;&lt;a href=&quot;#Shell-modes&quot; class=&quot;headerlink&quot; title=&quot;Shell modes&quot;&gt;&lt;/a&gt;Shell modes&lt;/h2&gt;&lt;p&gt;主要有以下两种模式&lt;/p&gt;
&lt;h4 id=&quot;login&quot;&gt;&lt;a href=&quot;#login&quot; class=&quot;headerlink&quot; title=&quot;login&quot;&gt;&lt;/a&gt;login&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;你打开一个shell或者terminal，提示输入用户名密码才能登陆，这就是个login shell&lt;/li&gt;
&lt;li&gt;如果你打开terminal就能直接用，那non-login shell(Mac OSX特殊一些)&lt;/li&gt;
&lt;li&gt;总玩ubuntu的应该知道，&lt;code&gt;Ctrl&lt;/code&gt; + &lt;code&gt;Alt&lt;/code&gt; + &lt;code&gt;F1&lt;/code&gt;  出来的就是个login shell&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;interactive&quot;&gt;&lt;a href=&quot;#interactive&quot; class=&quot;headerlink&quot; title=&quot;interactive&quot;&gt;&lt;/a&gt;interactive&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;你打开的shell有prompt，并且它的stdin、stderr都定向到terminal&lt;/li&gt;
&lt;li&gt;上面那是术语，名字就能看出来，互动嘛，你通过ssh登录远程机器，ssh server肯定要给你个pty吧，好让你执行命令&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Test&quot;&gt;&lt;a href=&quot;#Test&quot; class=&quot;headerlink&quot; title=&quot;Test&quot;&gt;&lt;/a&gt;Test&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$  `[[ $- == *i* ]] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Interactive&#39;&lt;/span&gt; || &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Not interactive&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Interactive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$  `&lt;span class=&quot;built_in&quot;&gt;shopt&lt;/span&gt; -q login_shell &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Login shell&#39;&lt;/span&gt; || &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Not login shell&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Login shell    &lt;span class=&quot;comment&quot;&gt;# 特殊 for mac osx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$  `ssh ubuntu &lt;span class=&quot;string&quot;&gt;&quot;[[ $- == *i* ]] &amp;amp;&amp;amp; echo &#39;Interactive&#39; || echo &#39;Not interactive&#39;&quot;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Interactive    &lt;span class=&quot;comment&quot;&gt;# 因为我用的terminal是interactive&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$  `ssh ubuntu &lt;span class=&quot;string&quot;&gt;&quot;shopt -q login_shell &amp;amp;&amp;amp; echo &#39;Login shell&#39; || echo &#39;Not login shell&#39;&quot;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Not login shell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-ubuntu$ `[[ $- == *i* ]] &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Interactive&#39;&lt;/span&gt; || &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Not interactive&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Interactive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-ubuntu$ `&lt;span class=&quot;built_in&quot;&gt;shopt&lt;/span&gt; -q login_shell &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Login shell&#39;&lt;/span&gt; || &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;Not login shell&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Not login shell  &lt;span class=&quot;comment&quot;&gt;# 有别于mac osx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$ `bash test.sh`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Not interactive  &lt;span class=&quot;comment&quot;&gt;# bash script.sh：non-login,non-interactive; 说明ssh remote command 是 non-login,non-interactive&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;me@&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;-mac$ `cat test.sh`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh ubuntu &lt;span class=&quot;string&quot;&gt;&quot;[[ $- == *i* ]] &amp;amp;&amp;amp; echo &#39;Interactive&#39; || echo &#39;Not interactive&#39;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Shell-init-files&quot;&gt;&lt;a href=&quot;#Shell-init-files&quot; class=&quot;headerlink&quot; title=&quot;Shell init files&quot;&gt;&lt;/a&gt;Shell init files&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://wholetsthedogout.qiniudn.com/bash_init.png&quot; alt=&quot;how the bash load init files&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Answer&quot;&gt;&lt;a href=&quot;#Answer&quot; class=&quot;headerlink&quot; title=&quot;Answer&quot;&gt;&lt;/a&gt;Answer&lt;/h2&gt;&lt;p&gt;回到开篇问题，为什么少了很多环境变量那，从上图可以看出，俺的脚本是non-login,non-interactive&lt;br&gt;所以.bash_profile,.bashrc都没被执行到~&lt;/p&gt;
&lt;p&gt;&lt;em&gt;解决方法&lt;/em&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;用到的变量都加到&lt;code&gt;/etc/environment&lt;/code&gt;中，这个就是全局了，如果你不想影响其他用户，请看下一方法&lt;/li&gt;
&lt;li&gt;sshd_config配置项PermitUserEnvironment&lt;ul&gt;
&lt;li&gt;vim &lt;code&gt;/etc/sshd_config&lt;/code&gt;, add &lt;code&gt;&amp;#39;PermitUserEnvironment yes&amp;#39;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;添加变量到&lt;code&gt;~/.ssh/environment&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;service ssh restart&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ssh remote env&lt;/code&gt; 测试一下&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$BASH_ENV&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;这个变量默认是空值，在哪有效设置让我有些迷惑&lt;/li&gt;
&lt;li&gt;你想想，放到&lt;code&gt;/etc/enviroment&lt;/code&gt;里吧，不如直接方法1了&lt;/li&gt;
&lt;li&gt;放到&lt;code&gt;~/.bash_profile ~/.bashrc&lt;/code&gt;里吧，就像之前说的，是读取不到的&lt;/li&gt;
&lt;li&gt;google到一方法，通过&lt;a href=&quot;http://seejeffrun.blogspot.com/2008/04/cron-doesnt-read-minds-customizing-my.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;crontab&lt;/a&gt;来解决&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://capistranorb.com/documentation/faq/why-does-something-work-in-my-ssh-session-but-not-in-capistrano/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Why does something work in my SSH session, but not in Capistrano?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.solipsys.co.uk/new/BashInitialisationFiles.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Bash init files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sstephenson/rbenv/wiki/Unix-shell-initialization&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rbenv unix shell initialization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.tldp.org/LDP/abs/html/intandnonint.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Interactive and non-interactive shells and scripts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Bash startup files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.thinkplexx.com/learn/howto/security/ssh/setting-ssh-remote-host-environment-variables-interactive-shell&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Setting ssh remote host environment variables&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://linux.die.net/man/5/ssh_config&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ssh_config(5) - Linux man page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;先说下这问题咋来的，目前开发流程如下：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+---------------+       scp files...                     +-----------------+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;| localhost     |  ===================================&amp;gt;  | remote host     |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; coding  |   remote ssh &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; compiling     |   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; compiling |&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+---------------+                                        +-----------------+&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如上图，代码是本地马吊们敲出来地，so文件是要放到远程开发环境编译出来地；&lt;br&gt;普通青年尼，可能是打开xshell，xftp，先把文件拖上去，然后ssh登陆编译环境，然后make;&lt;br&gt;效率极低不说，逼格也不够啊，于是乎就有了下面代码：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;scp *&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;*.&amp;#123;gcc,h,pc,cpp&amp;#125; ya-dev:~/src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh ya-dev &lt;span class=&quot;string&quot;&gt;&#39;cd ~/src; ls &#39;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;*&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&#39;.gcc  | xargs -I &amp;#123;&amp;#125; make -f &amp;#123;&amp;#125; ORA_VER=10&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;问题来了，远程执行会报错，部分lib库找不到；但是ssh登陆后再执行就没问题~&lt;br&gt;&lt;code&gt;ssh ya-dev env&lt;/code&gt; 一看，果然缺少很多环境变量，为什么会这样呢，这就要从爷爷粮票的故事讲起了~&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Assassins</title>
    <link href="http://michaelhuang.github.io/2014/20140331_pic_test/"/>
    <id>http://michaelhuang.github.io/2014/20140331_pic_test/</id>
    <published>2014-03-30T19:00:17.000Z</published>
    <updated>2016-04-15T14:11:20.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;strong&gt;Give me the name, I’ll give U the blood&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/games/04.jpg&quot; alt=&quot;Give me the name, I&amp;#39;ll give U the blood&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;Speak to me or speak to God&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/games/01.jpg&quot; alt=&quot;Speak to me or speak to God&quot;&gt;&lt;br&gt;&lt;strong&gt;We work in the dark and serve the lights,we are assassins&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/games/03.jpg&quot; alt=&quot;We work in the dark and serve the lights,we are assassins&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Give me the name, I’ll give U the blood&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://michaelhuang.qiniudn.com/games/04.jpg&quot; alt=&quot;Give me the name, I&amp;#39;ll give U the blood&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>He&#39;s Only Focused on What He Wrote</title>
    <link href="http://michaelhuang.github.io/2014/workout-2014/"/>
    <id>http://michaelhuang.github.io/2014/workout-2014/</id>
    <published>2014-01-01T15:39:26.000Z</published>
    <updated>2016-03-18T03:09:32.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;不要过没有审查过的生活&lt;/em&gt;&lt;br&gt;&lt;em&gt;~苏格拉底~&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;现在有的人，自己的量吃不下一口，他却买下了整卷书，想着全吞下去。结果全吐了出来不说，还消化不良&lt;/em&gt;&lt;br&gt;&lt;em&gt;~爱比克泰德~&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;A ship in port is safe, but that is not what ships are built for.&lt;/em&gt;&lt;br&gt;&lt;em&gt;~Grace Murray Hopper~&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;每周保证至少&lt;code&gt;8h&lt;/code&gt;读书时间: 早上&lt;code&gt;0.5h * 7&lt;/code&gt; + 晚上&lt;code&gt;1.5h * 3&lt;/code&gt;(Mon. Wed. Fri.)&lt;/li&gt;
&lt;li&gt;健康饮食&lt;/li&gt;
&lt;li&gt;睡前&lt;code&gt;20min&lt;/code&gt;用来反省今天做的事情&lt;/li&gt;
&lt;li&gt;公开课&lt;code&gt;4&lt;/code&gt;个&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LUMA &amp;gt; 10w&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;每周至少&lt;code&gt;3天&lt;/code&gt;锻炼身体，尤其腰腹力量，嘿嘿&lt;/li&gt;
&lt;li&gt;english / spanish&lt;/li&gt;
&lt;li&gt;多和家人、朋友聊聊天&lt;/li&gt;
&lt;li&gt;be a Full-Stack Brogrammer&lt;/li&gt;
&lt;li&gt;切忌： 想的太多，做的太少！&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;不要过没有审查过的生活&lt;/em&gt;&lt;br&gt;&lt;em&gt;~苏格拉底~&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;现在有的人，自己的量吃不下一口，他却买下了整卷书，想着全吞下去。结果全吐了出来不说，还消化不良&lt;/em&gt;&lt;br&gt;&lt;em&gt;~爱比克泰德~&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;A ship in port is safe, but that is not what ships are built for.&lt;/em&gt;&lt;br&gt;&lt;em&gt;~Grace Murray Hopper~&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Who Lets the Dog Out!</title>
    <link href="http://michaelhuang.github.io/1990/about-me/"/>
    <id>http://michaelhuang.github.io/1990/about-me/</id>
    <published>1990-03-30T16:59:25.000Z</published>
    <updated>2016-03-18T02:57:49.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;strong&gt;hola! soy un&lt;/strong&gt;&lt;br&gt;&lt;code&gt;ubuntuer | heavy mac user | minimalist | huge fan of MOOC&lt;/code&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;strong&gt;love&lt;/strong&gt;&lt;br&gt;&lt;code&gt;bicycling | long slow distance | coding | philosophy | video games | photography&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;hate&lt;/strong&gt;&lt;br&gt;&lt;code&gt;smoking | cars | TV | heavy weather and heat&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;mail&lt;/strong&gt;&lt;br&gt;&lt;code&gt;echo zvpunryuhnat12.tznvy@pbz | tr a-z@. n-za-m.@&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;hola! soy un&lt;/strong&gt;&lt;br&gt;&lt;code&gt;ubuntuer | heavy mac user | minimalist | huge fan of MOOC&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
